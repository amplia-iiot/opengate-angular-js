!function(e,a){"use strict";function t(){}function r(){}function i(){}function o(){this.dataurl_regex=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i,this.isDataUrl=function(e){return"string"==typeof e&&!!e.match(this.dataurl_regex)}}function n(){}angular.module("opengate-angular-js",["schemaForm"]),angular.module("opengate-angular-js").run(["$templateCache",function(e){e.put("views/custom.ui.select.datastream.html",'<div class=form-group mass-autocomplete ng-if=$ctrl.multiple><label class=custom-ui-select-label>Datastream Id</label><ui-select custom-ui-select-config=$ctrl.ownConfig name=datastream ng-model=$ctrl.datastream theme=bootstrap title="Choose a datastream" custom-ui-select multiple=true custom-mass-autocomplete-item=$ctrl.ownConfig on-select="$ctrl.datastreamSelected($item, $model)" on-remove="$ctrl.datastreamRemove($item, $model)" ng-required=$ctrl.isRequired><ui-select-match placeholder="Choose a datastream" allow-clear=true>{{$item.identifier}}</ui-select-match><ui-select-choices repeat="ds in $ctrl.ownConfig.collection track by $index"><div><span ng-bind-html="ds.identifier | highlight: $select.search"></span> - <span ng-bind-html="ds.name | highlight: $select.search"></span></div><small><div ng-if=ds.category.name>Category: <span ng-bind-html="ds.category.name | highlight: $select.search"></span></div><div ng-if=ds.feed>Feed: <span ng-bind-html="ds.feed | highlight: $select.search"></span></div><div ng-if=ds.datamodel><div>Datamodel:</div><div>- Id: <span ng-bind-html="ds.datamodel.identifier | highlight: $select.search"></span><div>- Organization: <span ng-bind-html="ds.datamodel.organization | highlight: $select.search"></span><div>- Name: <span ng-bind-html="ds.datamodel.name | highlight: $select.search"></span><div>- Description: <span ng-bind-html="ds.datamodel.description | highlight: $select.search"></span><div>- Version: <span ng-bind-html="ds.datamodel.version | highlight: $select.search"></span></div></div></div></div></div></div></small></ui-select-choices></ui-select></div><div class=form-group mass-autocomplete ng-if=!$ctrl.multiple><label class=custom-ui-select-label>Datastream Id</label><ui-select custom-ui-select-config=$ctrl.ownConfig name=datastream ng-model=$ctrl.datastream theme=bootstrap title="Choose a datastream" custom-ui-select multiple=false custom-mass-autocomplete-item=$ctrl.ownConfig on-select="$ctrl.datastreamSelected($item, $model)" on-remove="$ctrl.datastreamRemove($item, $model)" ng-required=$ctrl.isRequired><ui-select-match placeholder="Choose a datastream" allow-clear=true>{{$item.identifier}}</ui-select-match><ui-select-choices repeat="ds in $ctrl.ownConfig.collection track by $index"><div><span ng-bind-html="ds.identifier | highlight: $select.search"></span> - <span ng-bind-html="ds.name | highlight: $select.search"></span></div><small><div ng-if=ds.category.name>Category: <span ng-bind-html="ds.category.name | highlight: $select.search"></span></div><div ng-if=ds.feed>Feed: <span ng-bind-html="ds.feed | highlight: $select.search"></span></div><div ng-if=ds.datamodel><div>Datamodel:</div><div>- Id: <span ng-bind-html="ds.datamodel.identifier | highlight: $select.search"></span><div>- Organization: <span ng-bind-html="ds.datamodel.organization | highlight: $select.search"></span><div>- Name: <span ng-bind-html="ds.datamodel.name | highlight: $select.search"></span><div>- Description: <span ng-bind-html="ds.datamodel.description | highlight: $select.search"></span><div>- Version: <span ng-bind-html="ds.datamodel.version | highlight: $select.search"></span></div></div></div></div></div></div></small></ui-select-choices></ui-select></div>'),e.put("views/custom.ui.select.entity.html",'<div class=form-group mass-autocomplete ng-if=$ctrl.multiple><label class=custom-ui-select-label>Entity Key</label><ui-select custom-ui-select-config=$ctrl.ownConfig name=entity ng-model=$ctrl.entity theme=bootstrap title="Choose a entity" custom-ui-select multiple=true custom-mass-autocomplete-item=$ctrl.ownConfig on-select="$ctrl.entitySelected($item, $model)" on-remove="$ctrl.entityRemove($item, $model)" ng-required=$ctrl.isRequired><ui-select-match placeholder="Choose a entity" allow-clear=true>{{$item.provision.administration.identifier._current.value}}</ui-select-match><ui-select-choices repeat="entityData in $ctrl.ownConfig.collection track by $index"><span ng-bind-html="entityData.provision.administration.identifier._current.value | highlight: $select.search"></span> <small><div ng-if=entityData.provision.device.specificType._current.value>Specific type: <span ng-bind-html="entityData.provision.device.specificType._current.value | highlight: $select.search"></span></div><div ng-if=entityData.provision.device.operationalStatus._current.value>Operational status: <span ng-bind-html="\'\'+entityData.provision.device.operationalStatus._current.value | highlight: $select.search"></span></div><div ng-if="!entityData.provision.device.specificType && entityData.provision.device.communicationsModule[0].subscriber.specificType._current.value">Specific type: <span ng-bind-html="entityData.provision.device.communicationsModule[0].subscriber.specificType._current.value | highlight: $select.search"></span></div><div ng-if="!entityData.provision.device.specificType && entityData.provision.device.communicationsModule[0].subscription.specificType._current.value">Specific type: <span ng-bind-html="entityData.provision.device.communicationsModule[0].subscriber.specificType._current.value | highlight: $select.search"></span></div></small></ui-select-choices></ui-select></div><div class=form-group mass-autocomplete ng-if=!$ctrl.multiple><label class=custom-ui-select-label>Entity Key</label><ui-select custom-ui-select-config=$ctrl.ownConfig name=entity ng-model=$ctrl.entity theme=bootstrap title="Choose a entity" custom-ui-select multiple=false custom-mass-autocomplete-item=$ctrl.ownConfig on-select="$ctrl.entitySelected($item, $model)" on-remove="$ctrl.entityRemove($item, $model)" ng-required=$ctrl.isRequired><ui-select-match placeholder="Choose a entity" allow-clear=true>{{$item.provision.administration.identifier._current.value}}</ui-select-match><ui-select-choices repeat="entityData in $ctrl.ownConfig.collection track by $index"><span ng-bind-html="entityData.provision.administration.identifier._current.value | highlight: $select.search"></span> <small><div ng-if=entityData.provision.device.specificType._current.value>Specific type: <span ng-bind-html="entityData.provision.device.specificType._current.value | highlight: $select.search"></span></div><div ng-if=entityData.provision.device.operationalStatus._current.value>Operational status: <span ng-bind-html="\'\'+entityData.provision.device.operationalStatus._current.value | highlight: $select.search"></span></div><div ng-if="!entityData.provision.device.specificType && entityData.provision.device.communicationsModule[0].subscriber.specificType._current.value">Specific type: <span ng-bind-html="entityData.provision.device.communicationsModule[0].subscriber.specificType._current.value | highlight: $select.search"></span></div><div ng-if="!entityData.provision.device.specificType && entityData.provision.device.communicationsModule[0].subscription.specificType._current.value">Specific type: <span ng-bind-html="entityData.provision.device.communicationsModule[0].subscriber.specificType._current.value | highlight: $select.search"></span></div></small></ui-select-choices></ui-select></div>'),e.put("views/custom.ui.select.helper.html",'<div class=form-group ng-hide=$ctrl.have_helper_keys ng-transclude=input><label for={{$ctrl.id}}>{{$ctrl.labelText}}</label> <input class=form-control name={{$ctrl.name}} type=text id={{$ctrl.id}} ng-model=$ctrl.helperModel ng-required=$ctrl.required> <span class=help-inline ng-show="!$ctrl.helperModel && $ctrl.required">{{$ctrl.labelError}}</span></div><div class=form-group ng-hide=!$ctrl.have_helper_keys><label for={{$ctrl.id}}>{{$ctrl.labelText}}</label><ui-select id={{$ctrl.id}} name={{$ctrl.name}} ng-model=$ctrl.helperModel theme=bootstrap title="Choose an option" ng-required=$ctrl.required tagging=$ctrl.helperTagTransform tagging-label=false><ui-select-match placeholder="Choose an option">{{$select.selected.value}}</ui-select-match><ui-select-choices repeat="parameter.value as (key, parameter) in $ctrl.$helper_keys | filter: $select.search"><span ng-bind-html="parameter.key | highlight: $select.search"></span>: <small ng-bind-html="parameter.value | highlight: $select.search"></small></ui-select-choices></ui-select><span class=help-inline ng-show="!$ctrl.helperModel && $ctrl.required">Field is required</span></div>'),e.put("views/helper.view.html",'<div class="row row-eq-height"><div class="container col-xs-10" ng-transclude></div><div class="col-xs-2 vcenter"><a class="btn btn-default ux-txt-success pointer" ng-href ng-click=$helper.open() ng-switch=$helper.mode><span ng-switch-when=button><i ng-class=$helper.helperButton aria-hidden=true></i></span> <span ng-switch-when=title>{{$helper.helperTitle}}</span> <span ng-switch-when=title_button><i ng-class=$helper.helperButton aria-hidden=true></i>{{$helper.helperTitle}}</span> <span ng-switch-default><i ng-if="!$helper.helperTitle && !$helper.helperButton" class="fa fa-lg fa-files-o" aria-hidden=true></i></span></a></div></div><script type=text/ng-template id=helper.view.modal.html><div class="modal-header"> <h4 class="modal-title">Helper</h4> </div> <div class="modal-body without-padding-top"> <uib-accordion close-others="true"> <div uib-accordion-group is-open="$ctrl.mapIsOpen" is-disabled="$ctrl.helper_exclusive ? !$ctrl.mapIsExclusive : false" class="map-option"> <div uib-accordion-heading>Map</div> <div class="row row-eq-height" ng-if="$ctrl.mapIsOpen"> <div class="col-xs-10"> <div class="form-group leaflet-container"> <leaflet id="map-marker" lf-center="$ctrl.map.center" event-broadcast="$ctrl.map.events" markers="$ctrl.map.markers" width="100% " height="300px"></leaflet> </div> </div> <div class="col-xs-2 vcenter"> <a class="top-buffer btn btn-default ux-txt-success pointer" ng-class="{\'disabled\': !$ctrl.helper_keys.map}" ng-click="$ctrl.ok(\'map\')" ng-disabled="!$ctrl.helper_keys.map"> <i class="fa fa-lg fa-files-o" aria-hidden="true"></i> </a> </div> </div> </div> <div uib-accordion-group is-open="$ctrl.entityIsOpen || $ctrl.datastreamIsOpen" is-disabled="$ctrl.helper_exclusive ? (!$ctrl.entityIsExclusive && !$ctrl.datastreamIsExclusive): false" class="entity-option"> <div uib-accordion-heading>Entity</div> <div class="row row-eq-height"> <div class="col-xs-10"> <custom-ui-select-entity on-select-item="onSelectEntityKey($item, $model)" on-remove="onDeleteEntityKey()" entity="$ctrl.entity.selected" multiple="false"> </custom-ui-select-entity> </div> <div class="col-xs-2 vcenter"> <a class="top-buffer btn btn-default ux-txt-success pointer" ng-class="{\'disabled\': !$ctrl.helper_keys.entity}" ng-click="$ctrl.ok(\'entity\')" ng-disabled="!$ctrl.helper_keys.entity"> <i class="fa fa-lg fa-files-o" aria-hidden="true"></i> </a> </div> </div> <div class="row row-eq-height"> <div class="col-xs-10"> <custom-ui-select-datastream on-select-item="onSelectDatastreamKey($item, $model)" on-remove="onDeleteDatastreamKey()" datastream="$ctrl.datastream.selected" multiple="false"> </custom-ui-select-datastream> </div> <div class="col-xs-2 vcenter"> <a class="top-buffer btn btn-default ux-txt-success pointer" ng-class="{\'disabled\': !$ctrl.helper_keys.datastream}" ng-click="$ctrl.ok(\'datastream\')" ng-disabled="!$ctrl.helper_keys.datastream"> <i class="fa fa-lg fa-files-o" aria-hidden="true"></i> </a> </div> </div> </div> </uib-accordion> </div> <div class="modal-footer"> <button class="btn btn-warning" type="button" ng-click="$ctrl.cancel()">Cancel</button> </div></script>'),e.put("views/schema.form.datastream.template.html",'<div><custom-ui-select-datastream on-select-item="evalExpr(form.onselectitem, {$item: $$value$$, $model: $model})" on-remove="evalExpr(form.onremove, {$item: $$value$$, $model: $model})" datastream=$$value$$ multiple={{form.multiple}}></custom-ui-select-datastream></div>'),e.put("views/schema.form.entity.template.html",'<div><custom-ui-select-entity on-select-item="evalExpr(form.onselectitem, {$item: $$value$$, $model: $model})" on-remove="evalExpr(form.onremove, {$item: $$value$$, $model: $model})" entity=$$value$$ multiple={{form.multiple}}></custom-ui-select-entity></div>'),e.put("views/schema.form.helper.template.html","<div class=form-group><helper-dialog helper-id={{form.helperid}} helper-exclusive={{form.exclusive}}><helper-ui-select id={{form.id}} name={{form.name}} label-text={{form.title}} helper-model=$$value$$ label-error={{form.labelerror}} required={{form.required}}><helper-ui-select-input><label for={{form.name}}>{{form.title}}</label> <input class=form-control name={{form.name}} type=text id={{form.id}} ng-model=$$value$$ ng-required=form.required></helper-ui-select-input></helper-ui-select></helper-dialog></div>"),e.put("views/window-time.select.view.html",'<div class=window-time-container><button type=button class="btn btn-xs" ng-class=oneDayClass ng-click=oneDay()>Last day</button> <button type=button class="btn btn-xs" ng-class=oneWeekClass ng-click=oneWeek()>Last 7 days</button> <button type=button class="btn btn-xs" ng-class=oneMonthClass ng-click=oneMonth()>Last 30 days</button> <button type=button class="btn btn-xs" ng-class=customClass ng-click=custom()>Custom</button> <button type=button class="btn btn-xs btn-info" ng-if=customEnabled ng-disabled=!!errorCustomWindow ng-click=applyCustom()>Apply</button> <button type=button class="btn btn-xs btn-info" ng-if=filterApplied ng-click=clear()>Clear</button><div ng-if=customEnabled class=window-time-body><div class=row><div class=col-xs-12><p class=input-group><label class=control-label>From: {{fromDate | date:\'fullDate\'}}</label> <input readonly datepicker-options=fromOptions type=text class=form-control show-button-bar=false uib-datepicker-popup={{format}} ng-model=date.from is-open=fromPopup.opened ng-required=true close-text=Close ng-change=fromChange()> <span class=input-group-btn><a class="btn btn-sm" ng-click=fromOpen()><i class="glyphicon glyphicon-calendar"></i></a></span></p></div><div class=col-xs-12><div uib-timepicker max=fromMax ng-model=date.from show-meridian=false ng-change=fromChange()></div></div></div><div class=row><div class=col-xs-12><p class=input-group><label class=control-label>To: {{toDate | date:\'fullDate\'}}</label> <input readonly datepicker-options=toOptions type=text class=form-control show-button-bar=false uib-datepicker-popup={{format}} ng-model=date.to is-open=toPopup.opened ng-required=true close-text=Close ng-change=toChange()> <span class=input-group-btn><button type=button class="btn btn-sm" ng-click=toOpen()><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class=col-xs-12><div uib-timepicker max=toMax min=toMin ng-model=date.to show-meridian=false ng-change=toChange()></div></div></div><alert type=danger ng-show=errorCustomWindow class=text-danger style="display: block;text-align: center;"><span ng-bind=errorCustomWindow></span></alert></div></div>')}]),angular.module("opengate-angular-js").service("$oguxThemes",[function(){var e="light",t="orange",r=e+" "+t,i=[{name:"default"},{name:"light"}],o={red:{id:"red",sample:"#f44336",rgba:"rgba(244, 67, 54, 0.5)",name:"Red",theme:["light","default"]},pink:{id:"pink",sample:"#e91e63",rgba:"rgba(233, 30, 99, 0.5)",name:"Pink",theme:["light","default"]},purple:{id:"purple",sample:"#9c27b0",rgba:"rgba(156, 39, 176, 0.5)",name:"Purple",theme:["light"]},deeppurple:{id:"deeppurple",sample:"#673ab7",rgba:"rgba(103, 10, 183, 0.5)",name:"Deep Purple",theme:["light"]},indigo:{id:"indigo",sample:"#3f51b5",rgba:"rgba(63, 81, 181, 0.5)",name:"Indigo",theme:["light"]},blue:{id:"blue",sample:"#2196f3",rgba:"rgba(33, 150, 243, 0.5)",name:"Blue",theme:["light","default"]},lightblue:{id:"lightblue",sample:"#03a9f4",rgba:"rgba(3, 169, 244, 0.5)",name:"Light Blue",theme:["light","default"]},cyan:{id:"cyan",sample:"#00bcd4",rgba:"rgba(0, 188, 212, 0.5)",name:"Cyan",theme:["light","default"]},teal:{id:"teal",sample:"#009688",rgba:"rgba(0, 150, 136, 0.5)",name:"Teal",theme:["light","default"]},green:{id:"green",sample:"#4caf50",rgba:"rgba(76, 175, 80, 0.5)",name:"Green",theme:["light","default"]},lightgreen:{id:"lightgreen",sample:"#8bc34a",rgba:"rgba(139, 195, 74, 0.5)",name:"Light Green",theme:["light","default"]},lime:{id:"lime",sample:"#cddc39",rgba:"rgba(205, 220, 57, 0.5)",name:"Lime",theme:["default"]},yellow:{id:"yellow",sample:"#ffeb3b",rgba:"rgba(255, 235, 59, 0.5)",name:"Yellow",theme:["default"]},amber:{id:"amber",sample:"#ffc107",rgba:"rgba(255, 193, 7, 0.5)",name:"Amber",theme:["default"]},orange:{id:"orange",sample:"#ff9800",rgba:"rgba(255, 152, 0, 0.5)",name:"Orange",theme:["light","default"]},deeporange:{id:"deeporange",sample:"#ff5722",rgba:"rgba(255, 87, 34, 0.5)",name:"Deep Orange",theme:["light","default"]},brown:{id:"brown",sample:"#795548",rgba:"rgba(121, 85, 72, 0.5)",name:"Brown",theme:["light"]},grey:{id:"grey",sample:"#9e9e9e",rgba:"rgba(33, 150, 243, 1)",name:"Grey",theme:["light","default"]},bluegrey:{id:"bluegrey",sample:"#607d8b",rgba:"rgba(96, 125, 139, 0.5)",name:"Blue Grey",theme:["light","default"]},darkgrey:{id:"darkgrey",sample:"#2D2D2D",rgba:"rgba(45, 45, 45, 0.5)",name:"Dark Grey",theme:["light"]}};return{setThemeComposition:function(a){r=a;var i=r.split(" ");e=i[0],t=i[1]},colors:function(){return o},themes:function(){return i},getColorConfig:function(e){return o[e]?o[e]:a},getColorsKeys:function(){return Object.keys(o)},colorsByTheme:function(e){var a=[];return angular.forEach(o,function(t,r){t.theme.indexOf(e)!==-1&&a.push(t)}),a},getThemeFromThemeComposition:function(){return e},getColorFromThemeComposition:function(){return o[t]}}}]),angular.module("opengate-angular-js").service("$ogapi",function(){function t(){var t=a;this.api=function(){if("undefined"!=typeof t)return t;throw new Error("Must invoke create([options]) function before api() function")},this.create=function(a){return t=new e.OpenGateAPI(a)},this.release=function(){return t=a,this}}return new t}),angular.module("opengate-angular-js").service("$ogapiErrorParser",[function(){return{toString:function(e,a){var t="";if(e.data&&e.data.errors&&e.data.errors.length>0)for(var r=0;r<e.data.errors.length;r++)t+=(e.data.errors[r].message||e.data.errors[r].description)+(a?a:"\n");else if(e.data&&e.data.length>0)for(var r=0;r<e.data.length;r++)t+=e.data[r].description+(a?a:"\n");else t=e;return t},toStringArray:function(e){var a=[];if(e.data&&e.data.errors&&e.data.errors.length>0)for(var t=0;t<e.data.errors.length;t++)a.push(e.data.errors[t].message);else if(e.data&&e.data.length>0)for(var t=0;t<e.data.length;t++)a.push(e.data[t].description);else a.push(e.data);return a}}}]),angular.module("opengate-angular-js").service("$jsonFinderHelper",["jsonPath",function(e){return t.prototype.jsonPath=e,{administration:new t,provisioned:new i,collected:new r}}]),t.prototype.getPath=function(e){if(!this.fields[e])throw new Error("Field <"+e+"> not found. Available:"+JSON.stringify(Object.keys(this.fields)));return this.fields[e].replace("[]","[*]")},t.prototype.findOne=function(e,a){return this.findAll(e,a)[0]},t.prototype.findAll=function(e,a){return this.jsonPath(e,this.getPath(a)+"._current.value")||[]},t.prototype.fields={identifier:"provision.administration.identifier",organization:"provision.administration.organization",serviceGroup:"provision.administration.serviceGroup",channel:"provision.administration.channel",feed:"provision.administration.defaultFeed",resourceType:"resourceType"},r.prototype=new t,r.prototype.fields=Object.assign({},{specificType:"device.specificType",location:"device.location",name:"device.name",description:"device.description",operationalStatus:"device.operationalStatus",serialNumber:"device.serialNumber",identifier:"device.identifier",model:"device.model",software:"device.software",trustedBoot:"device.trustedBoot",subscriberIdentifier:"device.communicationModules[].subscriber.identifier",subscriberSerialNumber:"device.communicationModules[].subscriber.serialNumber",subscriberSpecificType:"device.communicationModules[].subscriber.specificType",subscriberName:"device.communicationModules[].subscriber.name",subscriberDescription:"device.communicationModules[].subscriber.description",subscriptionIdentifier:"device.communicationModules[].subscription.identifier",subscriptionSpecificType:"device.communicationModules[].subscription.specificType",subscriptionName:"device.communicationModules[].subscription.name",subscriptionDescription:"device.communicationModules[].subscription.description",subscriptionImsi:"device.communicationModules[].subscription.mobile.imsi",subscriptionMsisdn:"device.communicationModules[].subscription.mobile.msisdn",subscriptionMsisdnVoice:"device.communicationModules[].subscription.mobile.voice.msisdn",subscriptionAddress:"device.communicationModules[].subscription.address",subscriptionHomeOperator:"device.communicationModules[].subscription.mobile.homeOperator",subscriptionRegisteredOperator:"device.communicationModules[].subscription.mobile.registeredOperator"}),i.prototype=new r,i.prototype.fields=Object.assign({},i.prototype.fields,{adState:"provision.device.administrativeState",certificates:"provision.device.certificates",subscriberAdState:"device.communicationModules[].subscriber.administrativeState",subscriptionAdState:"device.communicationModules[].subscription.administrativeState",subscriberIcc:"provision.device.communicationModules[].subscriber.mobile.icc"}),i.prototype.getPath=function(e){var a=t.prototype.getPath(e);return a.startsWith("provision.")||(a="provision."+a),a},angular.module("opengate-angular-js").service("$faIcons",[function(){var e=["fa-500px","fa-address-book","fa-address-book-o","fa-address-card","fa-address-card-o","fa-adjust","fa-adn","fa-align-center","fa-align-justify","fa-align-left","fa-align-right","fa-amazon","fa-ambulance","fa-american-sign-language-interpreting","fa-anchor","fa-android","fa-angellist","fa-angle-double-down","fa-angle-double-left","fa-angle-double-right","fa-angle-double-up","fa-angle-down","fa-angle-left","fa-angle-right","fa-angle-up","fa-apple","fa-archive","fa-area-chart","fa-arrow-circle-down","fa-arrow-circle-left","fa-arrow-circle-o-down","fa-arrow-circle-o-left","fa-arrow-circle-o-right","fa-arrow-circle-o-up","fa-arrow-circle-right","fa-arrow-circle-up","fa-arrow-down","fa-arrow-left","fa-arrow-right","fa-arrow-up","fa-arrows","fa-arrows-alt","fa-arrows-h","fa-arrows-v","fa-asl-interpreting","fa-assistive-listening-systems","fa-asterisk","fa-at","fa-audio-description","fa-automobile","fa-backward","fa-balance-scale","fa-ban","fa-bandcamp","fa-bank","fa-bar-chart","fa-bar-chart-o","fa-barcode","fa-bars","fa-bath","fa-bathtub","fa-battery","fa-battery-0","fa-battery-1","fa-battery-2","fa-battery-3","fa-battery-4","fa-battery-empty","fa-battery-full","fa-battery-half","fa-battery-quarter","fa-battery-three-quarters","fa-bed","fa-beer","fa-behance","fa-behance-square","fa-bell","fa-bell-o","fa-bell-slash","fa-bell-slash-o","fa-bicycle","fa-binoculars","fa-birthday-cake","fa-bitbucket","fa-bitbucket-square","fa-bitcoin","fa-black-tie","fa-blind","fa-bluetooth","fa-bluetooth-b","fa-bold","fa-bolt","fa-bomb","fa-book","fa-bookmark","fa-bookmark-o","fa-braille","fa-briefcase","fa-btc","fa-bug","fa-building","fa-building-o","fa-bullhorn","fa-bullseye","fa-bus","fa-buysellads","fa-cab","fa-calculator","fa-calendar","fa-calendar-check-o","fa-calendar-minus-o","fa-calendar-o","fa-calendar-plus-o","fa-calendar-times-o","fa-camera","fa-camera-retro","fa-car","fa-caret-down","fa-caret-left","fa-caret-right","fa-caret-square-o-down","fa-caret-square-o-left","fa-caret-square-o-right","fa-caret-square-o-up","fa-caret-up","fa-cart-arrow-down","fa-cart-plus","fa-cc","fa-cc-amex","fa-cc-diners-club","fa-cc-discover","fa-cc-jcb","fa-cc-mastercard","fa-cc-paypal","fa-cc-stripe","fa-cc-visa","fa-certificate","fa-chain","fa-chain-broken","fa-check","fa-check-circle","fa-check-circle-o","fa-check-square","fa-check-square-o","fa-chevron-circle-down","fa-chevron-circle-left","fa-chevron-circle-right","fa-chevron-circle-up","fa-chevron-down","fa-chevron-left","fa-chevron-right","fa-chevron-up","fa-child","fa-chrome","fa-circle","fa-circle-o","fa-circle-o-notch","fa-circle-thin","fa-clipboard","fa-clock-o","fa-clone","fa-close","fa-cloud","fa-cloud-download","fa-cloud-upload","fa-cny","fa-code","fa-code-fork","fa-codepen","fa-codiepie","fa-coffee","fa-cog","fa-cogs","fa-columns","fa-comment","fa-comment-o","fa-commenting","fa-commenting-o","fa-comments","fa-comments-o","fa-compass","fa-compress","fa-connectdevelop","fa-contao","fa-copy","fa-copyright","fa-creative-commons","fa-credit-card","fa-credit-card-alt","fa-crop","fa-crosshairs","fa-css3","fa-cube","fa-cubes","fa-cut","fa-cutlery","fa-dashboard","fa-dashcube","fa-database","fa-deaf","fa-deafness","fa-dedent","fa-delicious","fa-desktop","fa-deviantart","fa-diamond","fa-digg","fa-dollar","fa-dot-circle-o","fa-download","fa-dribbble","fa-drivers-license","fa-drivers-license-o","fa-dropbox","fa-drupal","fa-edge","fa-edit","fa-eercast","fa-eject","fa-ellipsis-h","fa-ellipsis-v","fa-empire","fa-envelope","fa-envelope-o","fa-envelope-open","fa-envelope-open-o","fa-envelope-square","fa-envira","fa-eraser","fa-etsy","fa-eur","fa-euro","fa-exchange","fa-exclamation","fa-exclamation-circle","fa-exclamation-triangle","fa-expand","fa-expeditedssl","fa-external-link","fa-external-link-square","fa-eye","fa-eye-slash","fa-eyedropper","fa-fa","fa-facebook","fa-facebook-f","fa-facebook-official","fa-facebook-square","fa-fast-backward","fa-fast-forward","fa-fax","fa-feed","fa-female","fa-fighter-jet","fa-file","fa-file-archive-o","fa-file-audio-o","fa-file-code-o","fa-file-excel-o","fa-file-image-o","fa-file-movie-o","fa-file-o","fa-file-pdf-o","fa-file-photo-o","fa-file-picture-o","fa-file-powerpoint-o","fa-file-sound-o","fa-file-text","fa-file-text-o","fa-file-video-o","fa-file-word-o","fa-file-zip-o","fa-files-o","fa-film","fa-filter","fa-fire","fa-fire-extinguisher","fa-firefox","fa-first-order","fa-flag","fa-flag-checkered","fa-flag-o","fa-flash","fa-flask","fa-flickr","fa-floppy-o","fa-folder","fa-folder-o","fa-folder-open","fa-folder-open-o","fa-font","fa-font-awesome","fa-fonticons","fa-fort-awesome","fa-forumbee","fa-forward","fa-foursquare","fa-free-code-camp","fa-frown-o","fa-futbol-o","fa-gamepad","fa-gavel","fa-gbp","fa-ge","fa-gear","fa-gears","fa-genderless","fa-get-pocket","fa-gg","fa-gg-circle","fa-gift","fa-git","fa-git-square","fa-github","fa-github-alt","fa-github-square","fa-gitlab","fa-gittip","fa-glass","fa-glide","fa-glide-g","fa-globe","fa-google","fa-google-plus","fa-google-plus-circle","fa-google-plus-official","fa-google-plus-square","fa-google-wallet","fa-graduation-cap","fa-gratipay","fa-grav","fa-group","fa-h-square","fa-hacker-news","fa-hand-grab-o","fa-hand-lizard-o","fa-hand-o-down","fa-hand-o-left","fa-hand-o-right","fa-hand-o-up","fa-hand-paper-o","fa-hand-peace-o","fa-hand-pointer-o","fa-hand-rock-o","fa-hand-scissors-o","fa-hand-spock-o","fa-hand-stop-o","fa-handshake-o","fa-hard-of-hearing","fa-hashtag","fa-hdd-o","fa-header","fa-headphones","fa-heart","fa-heart-o","fa-heartbeat","fa-history","fa-home","fa-hospital-o","fa-hotel","fa-hourglass","fa-hourglass-1","fa-hourglass-2","fa-hourglass-3","fa-hourglass-end","fa-hourglass-half","fa-hourglass-o","fa-hourglass-start","fa-houzz","fa-html5","fa-i-cursor","fa-id-badge","fa-id-card","fa-id-card-o","fa-ils","fa-image","fa-imdb","fa-inbox","fa-indent","fa-industry","fa-info","fa-info-circle","fa-inr","fa-instagram","fa-institution","fa-internet-explorer","fa-intersex","fa-ioxhost","fa-italic","fa-joomla","fa-jpy","fa-jsfiddle","fa-key","fa-keyboard-o","fa-krw","fa-language","fa-laptop","fa-lastfm","fa-lastfm-square","fa-leaf","fa-leanpub","fa-legal","fa-lemon-o","fa-level-down","fa-level-up","fa-life-bouy","fa-life-buoy","fa-life-ring","fa-life-saver","fa-lightbulb-o","fa-line-chart","fa-link","fa-linkedin","fa-linkedin-square","fa-linode","fa-linux","fa-list","fa-list-alt","fa-list-ol","fa-list-ul","fa-location-arrow","fa-lock","fa-long-arrow-down","fa-long-arrow-left","fa-long-arrow-right","fa-long-arrow-up","fa-low-vision","fa-magic","fa-magnet","fa-mail-forward","fa-mail-reply","fa-mail-reply-all","fa-male","fa-map","fa-map-marker","fa-map-o","fa-map-pin","fa-map-signs","fa-mars","fa-mars-double","fa-mars-stroke","fa-mars-stroke-h","fa-mars-stroke-v","fa-maxcdn","fa-meanpath","fa-medium","fa-medkit","fa-meetup","fa-meh-o","fa-mercury","fa-microchip","fa-microphone","fa-microphone-slash","fa-minus","fa-minus-circle","fa-minus-square","fa-minus-square-o","fa-mixcloud","fa-mobile","fa-mobile-phone","fa-modx","fa-money","fa-moon-o","fa-mortar-board","fa-motorcycle","fa-mouse-pointer","fa-music","fa-navicon","fa-neuter","fa-newspaper-o","fa-object-group","fa-object-ungroup","fa-odnoklassniki","fa-odnoklassniki-square","fa-opencart","fa-openid","fa-opera","fa-optin-monster","fa-outdent","fa-pagelines","fa-paint-brush","fa-paper-plane","fa-paper-plane-o","fa-paperclip","fa-paragraph","fa-paste","fa-pause","fa-pause-circle","fa-pause-circle-o","fa-paw","fa-paypal","fa-pencil","fa-pencil-square","fa-pencil-square-o","fa-percent","fa-phone","fa-phone-square","fa-photo","fa-picture-o","fa-pie-chart","fa-pied-piper","fa-pied-piper-alt","fa-pied-piper-pp","fa-pinterest","fa-pinterest-p","fa-pinterest-square","fa-plane","fa-play","fa-play-circle","fa-play-circle-o","fa-plug","fa-plus","fa-plus-circle","fa-plus-square","fa-plus-square-o","fa-podcast","fa-power-off","fa-print","fa-product-hunt","fa-puzzle-piece","fa-qq","fa-qrcode","fa-question","fa-question-circle","fa-question-circle-o","fa-quora","fa-quote-left","fa-quote-right","fa-ra","fa-random","fa-ravelry","fa-rebel","fa-recycle","fa-reddit","fa-reddit-alien","fa-reddit-square","fa-refresh","fa-registered","fa-remove","fa-renren","fa-reorder","fa-repeat","fa-reply","fa-reply-all","fa-resistance","fa-retweet","fa-rmb","fa-road","fa-rocket","fa-rotate-left","fa-rotate-right","fa-rouble","fa-rss","fa-rss-square","fa-rub","fa-ruble","fa-rupee","fa-s15","fa-safari","fa-save","fa-scissors","fa-scribd","fa-search","fa-search-minus","fa-search-plus","fa-sellsy","fa-send","fa-send-o","fa-server","fa-share","fa-share-alt","fa-share-alt-square","fa-share-square","fa-share-square-o","fa-shekel","fa-sheqel","fa-shield","fa-ship","fa-shirtsinbulk","fa-shopping-bag","fa-shopping-basket","fa-shopping-cart","fa-shower","fa-sign-in","fa-sign-language","fa-sign-out","fa-signal","fa-signing","fa-simplybuilt","fa-sitemap","fa-skyatlas","fa-skype","fa-slack","fa-sliders","fa-slideshare","fa-smile-o","fa-snapchat","fa-snapchat-ghost","fa-snapchat-square","fa-snowflake-o","fa-soccer-ball-o","fa-sort","fa-sort-alpha-asc","fa-sort-alpha-desc","fa-sort-amount-asc","fa-sort-amount-desc","fa-sort-asc","fa-sort-desc","fa-sort-down","fa-sort-numeric-asc","fa-sort-numeric-desc","fa-sort-up","fa-soundcloud","fa-space-shuttle","fa-spinner","fa-spoon","fa-spotify","fa-square","fa-square-o","fa-stack-exchange","fa-stack-overflow","fa-star","fa-star-half","fa-star-half-empty","fa-star-half-full","fa-star-half-o","fa-star-o","fa-steam","fa-steam-square","fa-step-backward","fa-step-forward","fa-stethoscope","fa-sticky-note","fa-sticky-note-o","fa-stop","fa-stop-circle","fa-stop-circle-o","fa-street-view","fa-strikethrough","fa-stumbleupon","fa-stumbleupon-circle","fa-subscript","fa-subway","fa-suitcase","fa-sun-o","fa-superpowers","fa-superscript","fa-support","fa-table","fa-tablet","fa-tachometer","fa-tag","fa-tags","fa-tasks","fa-taxi","fa-telegram","fa-television","fa-tencent-weibo","fa-terminal","fa-text-height","fa-text-width","fa-th","fa-th-large","fa-th-list","fa-themeisle","fa-thermometer","fa-thermometer-0","fa-thermometer-1","fa-thermometer-2","fa-thermometer-3","fa-thermometer-4","fa-thermometer-empty","fa-thermometer-full","fa-thermometer-half","fa-thermometer-quarter","fa-thermometer-three-quarters","fa-thumb-tack","fa-thumbs-down","fa-thumbs-o-down","fa-thumbs-o-up","fa-thumbs-up","fa-ticket","fa-times","fa-times-circle","fa-times-circle-o","fa-times-rectangle","fa-times-rectangle-o","fa-tint","fa-toggle-down","fa-toggle-left","fa-toggle-off","fa-toggle-on","fa-toggle-right","fa-toggle-up","fa-trademark","fa-train","fa-transgender","fa-transgender-alt","fa-trash","fa-trash-o","fa-tree","fa-trello","fa-tripadvisor","fa-trophy","fa-truck","fa-try","fa-tty","fa-tumblr","fa-tumblr-square","fa-turkish-lira","fa-tv","fa-twitch","fa-twitter","fa-twitter-square","fa-umbrella","fa-underline","fa-undo","fa-universal-access","fa-university","fa-unlink","fa-unlock","fa-unlock-alt","fa-unsorted","fa-upload","fa-usb","fa-usd","fa-user","fa-user-circle","fa-user-circle-o","fa-user-md","fa-user-o","fa-user-plus","fa-user-secret","fa-user-times","fa-users","fa-vcard","fa-vcard-o","fa-venus","fa-venus-double","fa-venus-mars","fa-viacoin","fa-viadeo","fa-viadeo-square","fa-video-camera","fa-vimeo","fa-vimeo-square","fa-vine","fa-vk","fa-volume-control-phone","fa-volume-down","fa-volume-off","fa-volume-up","fa-warning","fa-wechat","fa-weibo","fa-weixin","fa-whatsapp","fa-wheelchair","fa-wheelchair-alt","fa-wifi","fa-wikipedia-w","fa-window-close","fa-window-close-o","fa-window-maximize","fa-window-minimize","fa-window-restore","fa-windows","fa-won","fa-wordpress","fa-wpbeginner","fa-wpexplorer","fa-wpforms","fa-wrench","fa-xing","fa-xing-square","fa-y-combinator","fa-y-combinator-square","fa-yahoo","fa-yc","fa-yc-square","fa-yelp","fa-yen","fa-yoast","fa-youtube","fa-youtube-play","fa-youtube-square"];
return{list:function(){return e},exists:function(a){return e.indexOf(a)>-1}}}]),angular.module("opengate-angular-js").factory("Filter",["$window","$sce","$q",function(e,t,r){function i(e,a){var r,i,o,l=[];if(e&&0!==e.trim().length){var s=e.toLowerCase().trim();for(r=0;r<a.length&&l.length<8;r++)i=a[r],i.toLowerCase().indexOf(s)>-1&&l.push({label:t.trustAsHtml(n(i,e)),value:i});for(r=0;r<u.length&&l.length<12;r++)o=u[r],o.toLowerCase().indexOf(s)>-1&&l.push({label:t.trustAsHtml(n(o,e)),value:o})}else{for(r=0;r<a.length&&l.length<8;r++)i=a[r],l.push({label:t.trustAsHtml(n(i,e)),value:i});for(r=0;r<u.length&&l.length<12;r++)o=u[r],l.push({label:t.trustAsHtml(n(o,e)),value:o})}return l}function o(e,t,o){var n=r.defer();return o.findFields(e).then(function(r){var o=r,l=-1;if(t.selectionStart?l=t.selectionStart-1:t.prop&&(l=t.prop("selectionStart")-1),!(l<0)){var s;if(e!==a&&""!==e){for(var c=-1;l>=0&&c===-1;l--)d.indexOf(e[l])>-1?c=l+1:0===l&&(c=l);var f=c;for(l=c;l<e.length&&f===c;l++)d.indexOf(e[l])>-1?f=l+1:l===e.length-1&&(f=l+1);s=i(e.substring(c,f),o)}else s=i();s.forEach(function(e){e.value=e.value}),n.resolve(s)}})["catch"](function(e){console.error(e),n.reject(e)}),n.promise}function n(e,a){var t=new RegExp("("+a+")","gi");return e.replace(t,'<span class="text-info">$1</span>')}function l(a){var t=r.defer(),i=t.promise,o=null,n={text:[],offsets:[],filter:{}};try{e.jsep.addBinaryOp("and",1),e.jsep.addBinaryOp("&&",1),e.jsep.addBinaryOp("||",2),e.jsep.addBinaryOp("or",2),e.jsep.addBinaryOp("in",3),e.jsep.addBinaryOp("~",6),e.jsep.addBinaryOp("=",6),e.jsep.addBinaryOp("like",6),e.jsep.addBinaryOp("gt",6),e.jsep.addBinaryOp("lte",6),e.jsep.addBinaryOp("gte",6),e.jsep.addBinaryOp("eq",6),o=e.jsep(a),n.filter[o.operator]=[],n.filter=s(o),t.resolve(n)}catch(l){var c=l;l.description&&(c=l.description),t.reject(c)}return i}function s(e){var a,t,r={};if("BinaryExpression"===e.type&&/\eq|\neq|\like|\gt|\lt|\gte|\lte|\=|\'<'|\'>'|\~|\!/.test(e.operator)){a=c(e.left).split(".").reverse().join("."),a=a.replace(".undefined","[]"),t=e.right.name||e.right.value;var i=f(e.operator);r[i]={},r[i][a]=t}else"BinaryExpression"===e.type&&/\or|\and/.test(e.operator)&&(r[e.operator]=[],r[e.operator].push(s(e.left)),r[e.operator].push(s(e.right)));return r}function c(e){var a="";return"Identifier"===e.type?a=e.name:"MemberExpression"===e.type&&(a=e.property.name+"."+c(e.object)),a}function f(e){return"=="===e?"eq":"="===e?"eq":"!="===e?"neq":"~"===e?"like":">"===e?"gt":"<"===e?"lt":">="===e?"gte":"<="===e?"lte":e}var u=[],d=[" ","\n","-","!","=","~",">","<","&","or","and",") "];return{suggest_field_delimited:function(e,a,t){var r=o(e,a,t);return r},parseQuery:function(e){var a=l(e);return a}}}]),angular.module("opengate-angular-js").service("$dataFormatter",[function(){return new o}]),o.prototype.format=function(e){return this.isDataUrl(e)?(new n).format(e):e},n.prototype=new o,n.prototype.format=function(e){return'<img alt="image" class="datastreamImage" src="'+e+'"/>'},angular.module("opengate-angular-js").filter("humanize",["$window",function(e){function a(e){return/\d/.test(e)}return function(t,r,i){var o=t;return e.S(o).indexOf("$")!==-1&&(o=e.S(o).strip("$").s),angular.isString(o)&&!a(o)&&(o=e.S(o).humanize().s),o}}]).filter("communicationsInterface",function(){return function(e){var a=e;switch(a){case"COMMUNICATIONS_MODULE":return"Communications module";case"SUBSCRIPTION":return"Mobile line";case"SUBSCRIBER":return"SIM";case"HOME_OPERATOR":return"Home Operator";case"REGISTER_OPERATOR":return"Register Operator";case"ADDRESS":return"IP";case"SOFTWARE":return"Software";case"HARDWARE":return"Hardware";case"entityKey":return"Identifier";default:return a}}}).filter("dateNames",function(){var e={MON:"Monday",TUE:"Tuesday",WED:"Wednesday",THU:"Thursday",FRI:"Friday",SAT:"Saturday",SUN:"Sunday"},a={JAN:"January",FEB:"February",MAR:"March",APR:"April",MAY:"May",JUN:"June",JUL:"July",AUG:"August",SEP:"September",OCT:"October",NOV:"November",DEC:"December"};return function(t){return e[t]||a[t]||t}}).filter("icons",function(){return function(e,a,t){var r="fa fa-info";return"list"===e&&(r="fa fa-list"),"ban"===e&&(r="fa fa-ban"),"laptop"===e&&(r="fa fa-laptop"),"spin"===e&&(r="fa fa-spinner fa-spin"),"unit"===e&&(r="fa fa-plus-square"),"tags"===e&&(r="fa fa-tags"),r}}).filter("codeErrors",function(){var e={1004:"At least one valid reference to an entity is required",1005:"At least one valid reference to an entity is required",1017:"Tag is not valid. Please, check it."};return function(a){return{code:a.code,message:e[a.code]||a.message}}}).filter("textlength",function(){return function(e,a){var t=30;return a&&angular.isNumber(a)&&(t=a),e&&e.length>t?e.substring(0,t)+"...":e}}).filter("compactid",function(){return function(e){return e&&e.indexOf(".")>-1?e.substring(e.lastIndexOf(".")+1):e}}),angular.module("opengate-angular-js").config(["schemaFormProvider","schemaFormDecoratorsProvider","sfPathProvider","sfBuilderProvider",function(e,a,t,r){var i=function(a,r,i){if("string"===r.type&&"helperdialog"==r.format){var o=e.stdFormObj(a,r,i);return o.key=i.path,o.type="helperdialog",i.lookup[t.stringify(i.path)]=o,o}};e.defaults.string.unshift(i),a.defineAddOn("bootstrapDecorator","helperdialog","views/schema.form.helper.template.html",r.stdBuilders);var o=function(a,r,i){if("string"===r.type&&"customuiselect"==r.format){var o=e.stdFormObj(a,r,i);return o.key=i.path,o.type=r.properties&&r.properties.type?r.properties.type:"string",i.lookup[t.stringify(i.path)]=o,o}};e.defaults.string.unshift(o),a.defineAddOn("bootstrapDecorator","entity","views/schema.form.entity.template.html",r.stdBuilders),a.defineAddOn("bootstrapDecorator","datastream","views/schema.form.datastream.template.html",r.stdBuilders)}]),angular.module("opengate-angular-js").directive("windowTimeSelect",function(){return{restrict:"AE",templateUrl:"views/window-time.select.view.html",scope:{event:"@",rawdate:"@"},controller:["$scope","$element","$attrs",function(t,r,i){function o(){return e.moment(t.date.from).add(1,"hours")._d}function n(){return e.moment(t.date.to).subtract(1,"minutes")._d}function l(){return e.moment(t.date.to).subtract(1,"months")._d}function s(e){t.date||(t.date={}),t.date.to=e,t.toMax=e,t.toOptions={startingDay:1,showWeeks:!1,maxDate:e}}function c(){t.date.from=l(t.date.to),t.fromOptions={startingDay:1,showWeeks:!1,maxDate:n(t.date.to)},t.toOptions.minDate=o(),t.toMin=o(),t.fromMax=n(t.date.to)}function f(a){var t=e.moment().subtract(1,a);return{from:t._d,type:a}}t.oneDayClass=t.oneWeekClass=t.oneMonthClass=t.customClass="btn-info",t.filterApplied=!1,t.format="dd MMMM yyyy",t.clear=function(){t.oneDayClass=t.oneWeekClass=t.oneMonthClass=t.customClass="btn-info",t.filterApplied=!1,t.customEnabled=!1,t.$emit("onWindowTimeChanged",{})},t.fromOpen=function(){t.fromPopup.opened=!0},t.fromPopup={opened:!1},t.toOpen=function(){t.toPopup.opened=!0},t.toPopup={opened:!1},t.custom=function(){t.customEnabled=!t.customEnabled},t.apply=function(a,r){if(t.filterApplied=!0,t.customEnabled=!1,!e.eval(t.rawdate)){for(var i in a)"type"!==i&&"rawdate"!==i&&(a[i]=e.moment(a[i]).format());a.rawdate=!1}r&&t.$emit("onWindowTimeChanged",a)},t.oneDay=function(e){t.oneDayClass="btn-success",t.oneWeekClass=t.oneMonthClass=t.customClass="btn-info",t.apply(f("days"),!e)},t.oneWeek=function(e){t.oneWeekClass="btn-success",t.oneDayClass=t.oneMonthClass=t.customClass="btn-info",t.apply(f("weeks"),!e)},t.oneMonth=function(e){t.oneMonthClass="btn-success",t.oneWeekClass=t.oneDayClass=t.customClass="btn-info",t.apply(f("months"),!e)},t.applyCustom=function(e){t.customClass="btn-success",t.oneWeekClass=t.oneDayClass=t.oneMonthClass="btn-info",t.apply({type:"custom",to:t.date.to,from:t.date.from},!e)},t.init=function(){function r(){e.moment(t.date.to).diff(t.date.from)<=0?t.errorCustomWindow="From date("+t.date.from.toISOString()+") is bigger than to date("+t.date.to.toISOString()+")":t.errorCustomWindow=a}if(s(new Date),c(),t.toChange=function(){r(),t.fromOptions={maxDate:n(t.date.to)},t.fromMax=n(t.date.to)},t.fromChange=function(){r(),t.toOptions.minDate=o(),t.toMin=o()},t.$parent.config&&t.$parent.config.windowFilter){var i=t.$parent.config.windowFilter;switch(e.eval(t.rawdate)||(t.$parent.config.windowFilter.rawdate=!1),i.type){case"days":t.oneDay(!0);break;case"weeks":t.oneWeek(!0);break;case"months":t.oneMonth(!0);break;case"custom":i.to&&i.from&&(t.date.to=new Date(i.to),t.date.from=new Date(i.from)),t.applyCustom(!0)}}},t.init()}]}}),angular.module("opengate-angular-js").directive("showErrors",["$timeout","$interpolate",function(e,a){var t=function(t,r,i,o){var n,l,s,c,f,u,d=!1,p=!1;if(c=t.$eval(i.showErrors)||{},f=c.showSuccess||!1,n=r[0].querySelector(".form-control[name]")||r[0].querySelector("[name]"),s=angular.element(n),l=a(s.attr("name")||"")(t),!l)throw"show-errors element has no child input elements with a 'name' attribute class";var m=function(){return e(function(){r.removeClass("has-error"),r.removeClass("has-success"),p=!1},0,!1)};t.$watch(function(){return o[l]&&o[l].$invalid},function(e){return u(e)}),t.$on("show-errors-check-validity",function(e,a){if(angular.isUndefined(a)||o.$name===a)return d=!0,p=!0,u(o[l].$invalid)}),t.$on("show-errors-reset",function(e,a){if(angular.isUndefined(a)||o.$name===a)return m()}),u=function(e){if(r.toggleClass("has-error",p&&e),f)return r.toggleClass("has-success",p&&!e)}};return{restrict:"A",require:"^form",compile:function(e,a){if(a.showErrors.indexOf("skipFormGroupCheck")===-1&&!e.hasClass("form-group")&&!e.hasClass("input-group"))throw"show-errors element does not have the 'form-group' or 'input-group' class";return t}}}]),angular.module("opengate-angular-js").directive("elemReady",["$parse",function(e){return{restrict:"A",link:function(a,t,r){t.ready(function(){a.$apply(function(){var t=e(r.elemReady);t(a)})})}}}]),angular.module("opengate-angular-js").directive("disallowSpaces",function(){return{restrict:"A",link:function(a,t){t.bind("input",function(){e.$(this).val(e.$(this).val().replace(/ /g,""))})}}}),angular.module("opengate-angular-js").directive("customUiSelect",["$compile","Filter",function(e,a){var t=angular.element('<div title="Toggle Advanced/Basic filter search" ng-click="complex()" style="cursor:pointer" class="custom-ui-select-button input-group-addon"><i class="fa fa-filter"></i><i class="filter-icon fa fa-bold text-muted"></i></div>'),r=angular.element('<div class="custom-ui-select-container input-group"></div>'),i=angular.element('<style title="custom-ui-select-no-multiple">.custom-ui-select-no-multiple .ui-select-search[placeholder=""]{display:none}</style>'),o=function(e,a){var t=e.querySelectorAll("ui-select-choices");t.attr("refresh",a),t.attr("refresh-delay","0")};return{require:"uiSelect",scope:!0,bindToController:!0,controller:["$scope","$element","$attrs",function(e,t,r){function i(e){if(s.prefilter){var a={and:[]};return a.and.push(s.prefilter),a.and.push(e),a}return e}function o(){var a=r.customUiSelectConfig.split(".");if(1===a.length)return e[r.customUiSelectConfig];var t=e;return a.forEach(function(e){t=t[e]}),t}function n(e,a,t,r){c&&clearTimeout(c),c=setTimeout(function(){l(e,a,t,r)},500)}function l(a,t,i,o){r.$$button.querySelectorAll(".filter-icon").removeClass("fa-bold").removeClass("fa-font").addClass("fa-spinner").addClass("fa-spin"),a.limit(1e3).filter(o).build().execute().then(function(a){if(e._complex?r.$$button.querySelectorAll(".filter-icon").removeClass("fa-spinner").removeClass("fa-spin").addClass("fa-font"):r.$$button.querySelectorAll(".filter-icon").removeClass("fa-spinner").removeClass("fa-spin").addClass("fa-bold"),200===a.statusCode){var o=[];angular.isFunction(s.processingData)?s.processingData(a,o):o=a.data[i];var n=[];angular.isArray(o)?angular.copy(o,n):angular.forEach(o,function(e,a){n.push(e)}),angular.copy(n,t)}else t.splice(0,t.length),204!==a.statusCode?console.error(JSON.stringify(a)):console.log(JSON.stringify(a));e.$apply()})["catch"](function(e){r.$$button.querySelectorAll(".filter-icon").removeClass("fa-spinner").removeClass("fa-spin").addClass("fa-filter")})}var s=o();e.complexfilter=function(e){a.parseQuery(e||"").then(function(e){var a=e.filter;Object.keys(a).length>0?(n(s.builder,s.collection,s.rootKey,i(a)),console.log("Final filter: "+a)):s.collection.splice(0,s.collection.length)})["catch"](function(e){s.collection.splice(0,s.collection.length)})},e.asyncfilter=function(e){n(s.builder,s.collection,s.rootKey,i(s.filter(e)))},e._complex=r.$$button.querySelectorAll(".fa-filter").hasClass("text-primary"),e.complex=function(){e._complex=!e._complex,e._complex?(t.css("display","").removeClass("custom-ui-select-hide"),r.$$cloneElement.css("display","none").addClass("custom-ui-select-hide"),r.$$button.querySelectorAll(".filter-icon").removeClass("fa-bold").removeClass("text-muted").addClass("fa-font").addClass("text-primary")):(t.css("display","none").addClass("custom-ui-select-hide"),r.$$cloneElement.css("display","").removeClass("custom-ui-select-hide"),r.$$button.querySelectorAll(".filter-icon").removeClass("fa-font").addClass("text-muted").addClass("fa-bold").removeClass("text-primary"))},e.customUiTagTransform=function(e){return null};var c=null}],compile:function(n,l){l.$$button=t.clone(),l.$$container=r.clone();var s="true"!==l.multiple,c=l.tagging;console.log("isSimple: "+s),s&&(n.attr("limit","1"),l.limit="1",l.searchEnabled="!$select.selected || $select.selected.length === 0",n.attr("search-enabled","!$select.selected || $select.selected.length === 0"),n.addClass("custom-ui-select-no-multiple"),l.$$style=i.clone()),c&&0!==c.trim().length||(n.attr("tagging","customUiTagTransform"),l.tagging="customUiTagTransform");var f="asyncfilter($select.search);",u="complexfilter($select.search);";if(l.customMassAutocompleteItem){o(n,u);var d=angular.element(n.clone());d.removeAttr("custom-ui-select"),o(d,f),l.$$templateElement=d}else o(n,f);return function(t,r,i,o){function n(){var e=i.customMassAutocompleteItem.split(".");if(1===e.length)return t[i.customMassAutocompleteItem];var a=t;return e.forEach(function(e){a=a[e]}),a}var l="mass-autocomplete-ui-select",s="async-ui-select",c=angular.element("html head");if(i.$$style&&0===c.find('style[title="custom-ui-select-no-multiple"]').length&&c.append(i.$$style),i.customMassAutocompleteItem){r.addClass(l);var f=n();f.suggest||(f.suggest=a.suggest_field_delimited);var u=r.querySelectorAll("input.ui-select-search");u.attr("mass-autocomplete-item",i.customMassAutocompleteItem),e(u)(t),i.$$container.empty(),r.before(i.$$container),r.detach(),i.$$container.append(r);var d=i.$$templateElement.clone(),p=e(d)(t,function(e,a){i.$$container.append(e)});p.addClass(s),i.$$cloneElement=p,e(i.$$button)(t),i.$$container.append(i.$$button),r.css("display","none").addClass("custom-ui-select-hide");var m=[];i.$$container.bind("keydown",function(e){m.push(e.keyCode)}),i.$$container.bind("keyup",function(e){m.length>0&&(angular.equals(m,[17,18,70])&&t.complex(),m.splice(0,m.length))})}else r.addClass(s)}}}}]);var l=angular.module("opengate-angular-js");l.controller("helperDialogController",["$scope","$element","$attrs","$uibModal",function(e,a,t,r){var i=this,o=angular.element('<style title="helper-dialog-style">helper-dialog .row-eq-height,.helper-dialog .row-eq-height {display: -webkit-box;display: -webkit-flex;display: -ms-flexbox;display: flex;}helper-dialog .vcenter,.helper-dialog .vcenter {display: -webkit-box;display: -webkit-flex;display: -ms-flexbox;display: flex;flex-direction: column;justify-content: center;}.helper-dialog .top-buffer {margin-top: 25px;}.helper-dialog .custom-ui-select-label {display: none;}.helper-dialog .without-padding-top .form-group {margin-top: 0 !important;}.helper-dialog .without-padding-top.modal-body h4 {padding-bottom: 0px;}</style>'),n=angular.element("html head");0===n.find('style[title="helper-dialog-style"]').length&&n.append(o),i.mode="default",i.helperTitle?(i.mode="title",i.helperButton&&(i.mode="title_button")):i.helperButton&&(i.mode="button"),i.open=function(){var e=r.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"helper.view.modal.html",controller:"helperDialogModalController",controllerAs:"$ctrl",windowClass:"helper-dialog",resolve:{helper_id:function(){return i.helperId},helper_exclusive:function(){return"true"===i.helperExclusive}}});e.result.then(function(e){e?(i.selected=angular.fromJson(e),i.onCopy&&i.onCopy({$helper_keys:e})):console.warn("Nothing selected on modal")},function(){})}}]),l.controller("helperDialogModalController",["$scope","$uibModalInstance","helper_id","helper_exclusive",function(e,a,t,r){function i(e,a){o.helper_keys.map={latitude:e,longitude:a}}var o=this;o.helper_id=t,o[t+"IsOpen"]=!0,o[t+"IsExclusive"]=o.helper_exclusive=r,o.helper_keys={};var n=[];o.map={center:{lat:40.095,lng:-3.823,zoom:4},markers:{},events:{markers:{enable:["dragend","click"],logic:"emit"},map:{enable:["click"],logic:"emit"}}},n.push(e.$on("leafletDirectiveMarker.map-marker.click",function(e,a){delete o.helper_keys.map,o.map.markers={}}),e.$on("leafletDirectiveMap.map-marker.click",function(e,a){var t=a.leafletEvent.latlng;o.map.markers={marker:{lat:t.lat,lng:t.lng,draggable:!0,focus:!0,message:"Drag me to move. Click me to remove"}},i(t.lat,t.lng)}),e.$on("leafletDirectiveMarker.map-marker.dragend",function(e,a){var t=a.leafletEvent.target._leaflet_events.dragend[0].context._latlng;i(t.lat,t.lng)})),o.datastream={},e.onSelectDatastreamKey=function(e,a){o.helper_keys.datastream={datastreamId:e.identifier}},e.onDeleteDatastreamKey=function(){delete o.helper_keys.datastream},o.entity={},e.onSelectEntityKey=function(e,a){o.helper_keys.entity={entityKey:e.provision.administration.identifier._current.value}},e.onDeleteEntityKey=function(){delete o.helper_keys.entity},o.ok=function(e){a.close(o.helper_keys[e])},o.cancel=function(){a.dismiss("cancel")},e.$on("destroy",function(){for(var e in n)e()})}]),l.component("helperDialog",{transclude:!0,templateUrl:"views/helper.view.html",controller:"helperDialogController",controllerAs:"$helper",bindings:{onCopy:"&",helperId:"@",helperButton:"@",helperTitle:"@",helperExclusive:"@",modalTemplate:"@",modalController:"@"}}),angular.module("opengate-angular-js").controller("helperUiSelectController",["$scope","$element","$attrs",function(e,a,t){var r=this;r.$helper_keys={},r.labelError=r.labelError?r.labelError:"Parameter is required",r.labelText=r.labelText?r.labelText:"Parameter",r.helperTagTransform=function(e){return{key:"custom",value:e}},r._onCopy=function(e){r.$helper_keys=e.$helper_keys,r.have_helper_keys=!0,r.helperModel&&r.helperModel.length>0&&(r.$helper_keys["default"]=r.helperModel)},r.$onInit=function(){r.helperCtrl.onCopy=r._onCopy,r.have_helper_keys=!1}}]),angular.module("opengate-angular-js").component("helperUiSelect",{templateUrl:"views/custom.ui.select.helper.html",transclude:{input:"?helperUiSelectInput"},require:{helperCtrl:"^^helperDialog"},controller:"helperUiSelectController",bindings:{id:"@",name:"@",labelText:"@",helperModel:"=",required:"@",multiple:"@",labelError:"@"}}),angular.module("opengate-angular-js").controller("customUiSelectEntityController",["$scope","$element","$attrs","$api",function(e,a,t,r){var i=this;i.ownConfig={builder:r().devicesSearchBuilder(),filter:function(e){return{or:[{like:{"provision.administration.identifier":e}},{like:{"provision.device.specificType":e}},{like:{"device.specificType":e}}]}},rootKey:"devices",collection:[],customSelectors:r().devicesSearchBuilder()},i.entitySelected=function(e,a){var t={};t.$item=e,t.$model=a,i.onSelectItem(t)},i.entityRemove=function(e,a){i.onRemove(e,a)}}]),angular.module("opengate-angular-js").component("customUiSelectEntity",{templateUrl:"views/custom.ui.select.entity.html",controller:"customUiSelectEntityController",bindings:{onSelectItem:"&",onRemove:"&",entity:"=",multiple:"@",isRequired:"@"}}),angular.module("opengate-angular-js").controller("customUiSelectDatastreamController",["$scope","$element","$attrs","$api",function(e,a,t,r){var i=this;i.ownConfig={builder:r().datamodelsSearchBuilder(),filter:function(e){return i.lastSearch=e,e?{or:[{like:{"datamodels.categories.datastreams.name":e}}]}:{}},rootKey:"datamodels",collection:[],processingData:function(e,a){if(i.lastSearch){var t=[],r=e.data.datamodels;angular.forEach(r,function(e,a){var r=e.categories,o={identifier:e.identifier,description:e.description,name:e.name,organization:e.organizationName};angular.forEach(r,function(e,a){var r=e.datastreams,n={identifier:e.identifier};angular.forEach(r.filter(function(e){return e.identifier.indexOf(i.lastSearch)>-1&&!!i.lastSearch.length||!i.lastSearch}),function(e,a){var r=angular.copy(e);r.datamodel=o,r.category=n,t.push(r)})})}),angular.copy(t,a)}},customSelectors:r().datamodelsSearchBuilder()},i.datastreamSelected=function(e,a){var t={};t.$item=e,t.$model=a,i.onSelectItem(t)},i.datastreamRemove=function(e,a){i.onRemove(e,a)}}]),angular.module("opengate-angular-js").component("customUiSelectDatastream",{templateUrl:"views/custom.ui.select.datastream.html",controller:"customUiSelectDatastreamController",bindings:{onSelectItem:"&",onRemove:"&",datastream:"=",multiple:"@",isRequired:"@"}})}(window);